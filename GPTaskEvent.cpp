#include "GPTaskManager.h"

#ifdef GPTM_EVENT
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//constructeur des taches event
GPTaskEvent::GPTaskEvent()
{
   this->capt = NULL;
   this->pin = 0;
   this->event_default = 0;
   this->mode = 0;
}

//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
void GPTaskEvent::execTash()
{
   int t = (*this->capt)( this->pin );
   if( t != this->event_default )
   {
       this->event_default = t;
       //si on est en mode normal sinon c'est le mode BUTTON
       if( this->mode == GPTM_NORMAL )
         (*this->task)();
       else
         if( t != HIGH )
           (*this->task)();
   }
}
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
#endif
